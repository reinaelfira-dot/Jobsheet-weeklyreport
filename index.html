<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>PT Transkon Jaya â€“ Fleet Management Dashboard</title>

<!-- Tailwind -->
<script src="https://cdn.tailwindcss.com"></script>

<!-- Google Font -->
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">

<!-- Chart.js -->
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

<!-- Custom CSS -->
<link rel="stylesheet" href="style.css">

</head>

<body class="bg-[#8A0000] font-inter overflow-x-hidden">

<!-- HEADER -->
<section class="w-full bg-[#A60000] text-white py-10 shadow-xl">
    <h1 class="text-center text-4xl font-extrabold">PT Transkon Jaya â€“ Fleet Management Dashboard</h1>
    <p class="text-center text-lg mt-2 opacity-90">Real-time Asset & Jobsheet Monitoring System</p>
</section>

<!-- CONNECTION + LOADED BADGES -->
<div id="connectionStatus" class="connection-badge hidden">
    <span class="dot"></span> Connecting...
</div>

<div id="loadedSummary" class="loaded-badge hidden">
    <span class="check">âœ”</span>
    <span id="loadedMessage">Data loaded.</span>
</div>

<!-- WRAPPER -->
<div class="wrapper">

    <!-- ASSET OVERVIEW -->
    <div class="canva-card">
        <div class="flex items-center gap-2 text-xl font-bold">ğŸš— ASSET OVERVIEW</div>
        <p class="text-gray-600">Fleet asset management and distribution statistics</p>
    </div>

    <!-- FILTER ASSET -->
    <div class="canva-card mt-6">
        <h3 class="text-xl font-bold flex items-center gap-2 mb-3">ğŸ” Filter Asset Data</h3>

        <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
            <div>
                <label class="canva-label">HUB LOCATION</label>
                <select id="hubFilter" class="canva-input"></select>
            </div>

            <div>
                <label class="canva-label">SITE LOCATION</label>
                <select id="siteFilter" class="canva-input"></select>
            </div>
        </div>

        <div class="flex gap-3 mt-6">
            <button id="applyAssetFilter" class="canva-btn-primary">âœ“ Apply Filter</button>
            <button id="resetAssetFilter" class="canva-btn-outline">â­® Reset</button>

            <div class="ml-auto text-sm text-gray-500 flex items-center gap-1">
                ğŸ“… Last Update: <span id="lastAssetUpdate">-</span>
            </div>
        </div>
    </div>

    <!-- STATUS + CUSTOMER -->
    <div class="grid grid-cols-1 lg:grid-cols-2 gap-6 mt-6">
        <div class="canva-card scroll-card">
            <div class="card-title">ğŸ“Š Status Unit</div>
            <span class="unit-badge" id="statusUnitTotal">0 Units</span>
            <div id="statusUnitList" class="scroll-body"></div>
        </div>

        <div class="canva-card scroll-card">
            <div class="card-title">ğŸ‘¥ Customer</div>
            <span class="unit-badge" id="customerTotal">0 Units</span>
            <div id="customerList" class="scroll-body"></div>
        </div>
    </div>

    <!-- LOCATION + YEAR -->
    <div class="grid grid-cols-1 lg:grid-cols-2 gap-6 mt-6">
        <div class="canva-card scroll-card">
            <div class="card-title">ğŸ“ Location</div>
            <span class="unit-badge" id="locationTotal">0 Units</span>
            <div id="locationList" class="scroll-body"></div>
        </div>

        <div class="canva-card scroll-card">
            <div class="card-title">ğŸ“… Year</div>
            <span class="unit-badge" id="yearTotal">0 Units</span>
            <div id="yearList" class="scroll-body"></div>
        </div>
    </div>

    <!-- VEHICLE -->
    <div class="grid grid-cols-1 mt-6">
        <div class="canva-card scroll-card">
            <div class="card-title">ğŸš— Vehicle Type</div>
            <span class="unit-badge" id="vehicleTotal">0 Units</span>
            <div id="vehicleList" class="scroll-body"></div>
        </div>
    </div>
</div>

<!-- ASSET CHART -->
<div class="wrapper mt-10">
    <div class="canva-card">
        <div class="card-title mb-3">ğŸ“Š ASSET DISTRIBUTION</div>

        <select id="assetChartSelector" class="canva-input mb-4">
            <option value="year">Year</option>
            <option value="status">Status Unit</option>
            <option value="customer">Customer</option>
            <option value="location">Location</option>
            <option value="vehicle">Vehicle Type</option>
        </select>

        <canvas id="assetChartLarge" height="140"></canvas>
    </div>
</div>

<!-- JOBSHEET OVERVIEW -->
<div class="wrapper mt-12">

    <div class="canva-card">
        <div class="flex items-center gap-2 text-xl font-bold">ğŸ“‘ JOBSHEET OVERVIEW</div>
        <p class="text-gray-600">Maintenance and repair job tracking system</p>
    </div>

    <!-- DATE FILTER -->
    <div class="canva-card mt-6">
        <h3 class="text-lg font-bold mb-2">ğŸ“… Filter by Received Date</h3>

        <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
            <div>
                <label class="canva-label">Start Date</label>
                <input type="date" id="jsStart" class="canva-input" />
            </div>

            <div>
                <label class="canva-label">End Date</label>
                <input type="date" id="jsEnd" class="canva-input" />
            </div>
        </div>

        <div class="flex gap-3 mt-4">
            <button id="applyJSFilter" class="canva-btn-primary">âœ“ Apply Filter</button>
            <button id="resetJSFilter" class="canva-btn-outline">â­® Reset</button>
        </div>
    </div>

    <!-- SUMMARY CARDS -->
    <div class="grid grid-cols-1 lg:grid-cols-5 gap-6 mt-6">

        <div id="cardP1" class="summary-card clickable">
            <div class="summary-title">P1 PRIORITY</div>
            <div id="p1Count" class="summary-value">0</div>
            <div class="summary-sub">High Priority</div>
        </div>

        <div id="cardP2" class="summary-card clickable">
            <div class="summary-title">P2 PRIORITY</div>
            <div id="p2Count" class="summary-value">0</div>
            <div class="summary-sub">Medium Priority</div>
        </div>

        <div id="cardP3" class="summary-card clickable">
            <div class="summary-title">P3</div>
            <div id="p3Count" class="summary-value">0</div>
            <div class="summary-sub">Special Cases</div>
        </div>

        <div id="cardCash" class="summary-card clickable">
            <div class="summary-title">CASH ON SITE</div>
            <div id="cashCount" class="summary-value">0</div>
            <div class="summary-sub">On-site Payment</div>
        </div>

        <div id="cardRepair" class="summary-card clickable">
            <div class="summary-title">REPAIR</div>
            <div id="repairCount" class="summary-value">0</div>
            <div class="summary-sub">Repair Jobs</div>
        </div>
    </div>

    <!-- P3 PIE CHART -->
    <div class="canva-card mt-10">
        <h3 class="card-title">ğŸ“Š P3 Distribution by Site</h3>
        <canvas id="p3PieChart" height="200"></canvas>
    </div>
</div>

<!-- MODAL -->
<div id="detailModal" class="modal-overlay">
    <div class="modal-box">
        <div class="modal-header">
            <h3 id="modalTitle"></h3>
            <button id="closeModal" class="modal-close">âœ•</button>
        </div>
        <div id="modalBody" class="modal-body"></div>
    </div>
</div>

<!-- SCRIPT -->
<script src="script.js"></script>

</body>
</html>
